version: '3.8'

services:
  ourtube:
    image: chicohaager/ourtube:latest
    container_name: ourtube
    ports:
      - "8000:8000"
    volumes:
      - /DATA/AppData/ourtube/downloads:/app/downloads
      - /DATA/AppData/ourtube/config:/app/config
    environment:
      - DOWNLOAD_DIR=/app/downloads
      - MAX_CONCURRENT_DOWNLOADS=4
      - ENABLE_YTDL_UPDATE=true
      - YTDL_UPDATE_INTERVAL=86400
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/api/config"]
      interval: 30s
      timeout: 15s
      retries: 3
      start_period: 60s
    labels:
      - "casa.app.category=Media"
      - "casa.app.port.web=8000"
      - "casa.app.title=OurTube"
      - "casa.app.index=/"
      - "casa.icon=https://raw.githubusercontent.com/chicohaager/ourtube/main/logo-small.png"

# Installation:
# 1. mkdir -p /DATA/AppData/ourtube/{downloads,config}
# 2. docker-compose up -d
# 3. Access: http://your-ip:8000